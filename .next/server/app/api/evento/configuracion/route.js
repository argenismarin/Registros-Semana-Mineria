"use strict";(()=>{var e={};e.id=768,e.ids=[768],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},33108:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>v,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var n={};o.r(n),o.d(n,{GET:()=>f,POST:()=>m});var t=o(49303),i=o(88716),a=o(60670),s=o(87070),c=o(92048),u=o.n(c),d=o(55315);let l=o.n(d)().join(process.cwd(),"evento-config.json"),p={nombre:"Semana de la Miner\xeda",descripcion:"Evento acad\xe9mico sobre innovaci\xf3n en miner\xeda",fecha:new Date().toISOString().split("T")[0],horaInicio:"08:00",horaFin:"18:00",ubicacion:"Universidad Nacional de Colombia",organizador:"Facultad de Minas",contacto:"eventos@unal.edu.co",logoUrl:"",colorPrimario:"#1e40af",colorSecundario:"#3b82f6",mostrarEscarapelas:!0,mostrarQR:!0,requerirEmail:!1,requerirCargo:!1,requerirEmpresa:!1,mensajeBienvenida:"\xa1Bienvenido al evento! Por favor registra tu asistencia.",redesSociales:{facebook:"",twitter:"",instagram:"",linkedin:""}};async function f(){try{if(!u().existsSync(l))return s.NextResponse.json(p);{let e=u().readFileSync(l,"utf8"),r=JSON.parse(e);return s.NextResponse.json(r)}}catch(e){return console.error("Error leyendo configuraci\xf3n:",e),s.NextResponse.json(p)}}async function m(e){try{let r=await e.json();if(!r.nombre||""===r.nombre.trim())return s.NextResponse.json({error:"El nombre del evento es requerido"},{status:400});if(!r.fecha)return s.NextResponse.json({error:"La fecha del evento es requerida"},{status:400});let o=/^#[0-9A-F]{6}$/i;if(!o.test(r.colorPrimario))return s.NextResponse.json({error:"Color primario inv\xe1lido"},{status:400});if(!o.test(r.colorSecundario))return s.NextResponse.json({error:"Color secundario inv\xe1lido"},{status:400});if(r.contacto&&""!==r.contacto.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.contacto))return s.NextResponse.json({error:"Email de contacto inv\xe1lido"},{status:400});u().writeFileSync(l,JSON.stringify(r,null,2));try{await fetch(`${e.nextUrl.origin}/api/socket.io`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"configuracion-actualizada",data:{mensaje:"Configuraci\xf3n del evento actualizada",evento:r.nombre}})})}catch(e){console.error("Error notificando configuraci\xf3n:",e)}return s.NextResponse.json({success:!0,message:"Configuraci\xf3n guardada exitosamente"})}catch(e){return console.error("Error guardando configuraci\xf3n:",e),s.NextResponse.json({error:"Error interno del servidor"},{status:500})}}let v=new t.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/evento/configuracion/route",pathname:"/api/evento/configuracion",filename:"route",bundlePath:"app/api/evento/configuracion/route"},resolvedPagePath:"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\api\\evento\\configuracion\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:h}=v,j="/api/evento/configuracion/route";function y(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),n=r.X(0,[948,972],()=>o(33108));module.exports=n})();