"use strict";(()=>{var e={};e.id=453,e.ids=[453],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5145:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{POST:()=>c});var a=t(49303),n=t(88716),i=t(60670),o=t(87070),d=t(38990);async function c(e){try{let{asistentesIds:s}=await e.json();if(!s||!Array.isArray(s))return o.NextResponse.json({error:"Lista de IDs de asistentes requerida"},{status:400});let t=0,r=0;s.forEach(e=>{try{d.Z.updateAsistente(e,{qrGenerado:!0,fechaGeneracionQR:new Date().toISOString()})?t++:r++}catch(s){r++,console.error(`Error actualizando asistente ${e}:`,s)}});try{await fetch(`${e.nextUrl.origin}/api/socket.io`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"qr-masivo-generado",data:{cantidad:t,mensaje:`QR generados masivamente para ${t} asistentes`}})})}catch(e){console.error("Error notificando QR masivo:",e)}return o.NextResponse.json({success:!0,actualizados:t,errores:r,mensaje:`${t} asistentes marcados como QR generado`})}catch(e){return console.error("Error marcando QRs como generados:",e),o.NextResponse.json({error:"Error interno del servidor"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/qr/marcar-generados/route",pathname:"/api/qr/marcar-generados",filename:"route",bundlePath:"app/api/qr/marcar-generados/route"},resolvedPagePath:"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\api\\qr\\marcar-generados\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:h}=u,m="/api/qr/marcar-generados/route";function g(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},38990:(e,s,t)=>{t.d(s,{Z:()=>a});class r{getAsistentes(){return this.asistentes}addAsistente(e){this.asistentes.push(e)}findAsistenteById(e){return this.asistentes.find(s=>s.id===e)}updateAsistente(e,s){let t=this.asistentes.findIndex(s=>s.id===e);return -1===t?null:(this.asistentes[t]={...this.asistentes[t],...s},this.asistentes[t])}deleteAsistente(e){let s=this.asistentes.findIndex(s=>s.id===e);return -1!==s&&(this.asistentes.splice(s,1),!0)}searchAsistentes(e){let s=e.toLowerCase();return this.asistentes.filter(e=>e.nombre.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.cargo&&e.cargo.toLowerCase().includes(s)||e.empresa&&e.empresa.toLowerCase().includes(s))}getEstadisticas(){let e=this.asistentes.length,s=this.asistentes.filter(e=>e.presente).length;return{total:e,presentes:s,pendientes:e-s,escarapelasImpresas:this.asistentes.filter(e=>e.escarapelaImpresa).length}}constructor(){this.asistentes=[]}}let a=new r}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,972],()=>t(5145));module.exports=r})();