(()=>{var e={};e.id=256,e.ids=[256],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},99360:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(26079),s(32029),s(35866);var t=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(r,o);let d=["",{children:["importar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26079)),"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\importar\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\importar\\page.tsx"],m="/importar/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/importar/page",pathname:"/importar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95669:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},87034:(e,r,s)=>{Promise.resolve().then(s.bind(s,88585))},7873:(e,r,s)=>{Promise.resolve().then(s.bind(s,71349))},71349:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var t=s(10326),a=s(17577),i=s(88585);function n(){let[e,r]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(null),m=(0,a.useRef)(null),x=e=>{let r=e.split("\n").filter(e=>""!==e.trim());if(r.length<2)throw Error("El archivo debe tener al menos una cabecera y una l\xednea de datos");let s=r[0].split(",").map(e=>e.trim().toLowerCase()),t=s.findIndex(e=>e.includes("nombre")||e.includes("name")||e.includes("asistente")),a=s.findIndex(e=>e.includes("email")||e.includes("correo")||e.includes("mail")),i=s.findIndex(e=>e.includes("cargo")||e.includes("puesto")||e.includes("position")),n=s.findIndex(e=>e.includes("empresa")||e.includes("company")||e.includes("organizaci\xf3n"));if(-1===t)throw Error('No se encontr\xf3 una columna de "nombre" en el CSV');let l=[];for(let e=1;e<r.length;e++){let s=r[e].split(",").map(e=>e.trim().replace(/"/g,""));s.length>t&&""!==s[t].trim()&&l.push({nombre:s[t].trim(),email:a>=0&&s[a]?s[a].trim():void 0,cargo:i>=0&&s[i]?s[i].trim():void 0,empresa:n>=0&&s[n]?s[n].trim():void 0})}return l},p=async()=>{if(e){n(!0);try{let r=new FileReader;r.onload=async e=>{try{let r=e.target?.result,s=x(r),t=await fetch("/api/asistentes/importar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asistentes:s})}),a=await t.json();t.ok?(c(a),i.Am.success(`Importaci\xf3n completada: ${a.exitosos} exitosos`)):i.Am.error(a.error||"Error importando asistentes")}catch(e){i.Am.error("Error procesando la importaci\xf3n")}finally{n(!1)}},r.readAsText(e)}catch(e){i.Am.error("Error leyendo archivo"),n(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCC1 Importar Asistentes"}),t.jsx("p",{className:"text-gray-600",children:"Carga masiva desde archivo CSV"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{let e=new Blob(["nombre,email,cargo,empresa\nJuan P\xe9rez,juan@empresa.com,Ingeniero,Empresa ABC\nMar\xeda Gonz\xe1lez,maria@corp.com,Gerente,Corporaci\xf3n XYZ\nCarlos Rodr\xedguez,carlos@startup.com,Desarrollador,StartUp Tech"],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),s=URL.createObjectURL(e);r.setAttribute("href",s),r.setAttribute("download","plantilla-asistentes.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),i.Am.success("Plantilla CSV descargada")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:"\uD83D\uDCC4 Descargar Plantilla"}),t.jsx("a",{href:"/",className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition",children:"\uD83C\uDFE0 Volver"})]})]})})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"\uD83D\uDCCB Instrucciones"}),(0,t.jsxs)("div",{className:"space-y-2 text-blue-800",children:[(0,t.jsxs)("p",{children:["• El archivo debe estar en formato ",t.jsx("strong",{children:"CSV"})," (separado por comas)"]}),(0,t.jsxs)("p",{children:["• Debe incluir una ",t.jsx("strong",{children:"cabecera"})," con los nombres de las columnas"]}),(0,t.jsxs)("p",{children:["• La columna ",t.jsx("strong",{children:'"nombre"'})," es obligatoria"]}),t.jsx("p",{children:"• Columnas opcionales: email, cargo, empresa"}),t.jsx("p",{children:"• Descarga la plantilla para ver el formato correcto"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCE4 Seleccionar Archivo CSV"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[t.jsx("input",{ref:m,type:"file",accept:".csv",onChange:e=>{let s=e.target.files?.[0];if(!s)return;if(!s.name.toLowerCase().endsWith(".csv")){i.Am.error("Por favor selecciona un archivo CSV v\xe1lido");return}r(s),o([]),c(null);let t=new FileReader;t.onload=e=>{try{let r=e.target?.result,s=x(r);o(s.slice(0,10)),i.Am.success(`${s.length} asistentes detectados en el archivo`)}catch(e){i.Am.error(e instanceof Error?e.message:"Error procesando archivo"),r(null)}},t.readAsText(s)},className:"hidden"}),e?(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-6xl mb-4",children:"✅"}),t.jsx("p",{className:"text-gray-900 font-medium mb-2",children:e.name}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:[(e.size/1024).toFixed(1)," KB"]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[t.jsx("button",{onClick:()=>m.current?.click(),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition",children:"Cambiar Archivo"}),t.jsx("button",{onClick:p,disabled:s,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition",children:s?"Importando...":"Importar Asistentes"})]})]}):(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Haz clic para seleccionar un archivo CSV o arr\xe1stralo aqu\xed"}),t.jsx("button",{onClick:()=>m.current?.click(),className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition",children:"Seleccionar Archivo"})]})]})]}),l.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDC40 Vista Previa (primeros 10)"}),t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cargo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((e,r)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nombre}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.cargo||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.empresa||"-"})]},r))})]})})]}),d&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCCA Resultados de Importaci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.exitosos}),t.jsx("div",{className:"text-sm text-green-800",children:"Exitosos"})]}),(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.errores}),t.jsx("div",{className:"text-sm text-red-800",children:"Errores"})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:d.duplicados}),t.jsx("div",{className:"text-sm text-yellow-800",children:"Duplicados"})]})]}),d.detalles.length>0&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium mb-3",children:"Detalles:"}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:d.detalles.map((e,r)=>t.jsx("p",{className:"text-sm text-gray-700 mb-1",children:e},r))})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("a",{href:"/",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:"Ver Lista de Asistentes"})})]})]})]})}},26079:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\Argenis\OneDrive - Universidad Nacional de Colombia\Escritorio\Proyecto Registros\src\app\importar\page.tsx#default`)},32029:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o,metadata:()=>l});var t=s(19510),a=s(25384),i=s.n(a);s(5023);var n=s(96557);s(97001);let l={title:"Registro de Eventos",description:"Plataforma de registro de eventos en tiempo real",manifest:"/manifest.json",themeColor:"#1e40af",viewport:"width=device-width, initial-scale=1, maximum-scale=1"};function o({children:e}){return(0,t.jsxs)("html",{lang:"es",children:[(0,t.jsxs)("head",{children:[t.jsx("link",{rel:"icon",href:"/favicon.ico"}),t.jsx("link",{rel:"apple-touch-icon",href:"/icon-192x192.png"}),t.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),t.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),t.jsx("meta",{name:"apple-mobile-web-app-title",content:"Registro Eventos"})]}),(0,t.jsxs)("body",{className:i().className,children:[e,t.jsx(n.Ix,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})]})}},5023:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,700],()=>s(99360));module.exports=t})();