(()=>{var e={};e.id=787,e.ids=[787],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16172:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(38372),a(32029),a(35866);var r=a(23191),i=a(88716),t=a(37922),n=a.n(t),o=a(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(s,l);let c=["",{children:["qr-masivo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,38372)),"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\qr-masivo\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,32029)),"C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Argenis\\OneDrive - Universidad Nacional de Colombia\\Escritorio\\Proyecto Registros\\src\\app\\qr-masivo\\page.tsx"],m="/qr-masivo/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/qr-masivo/page",pathname:"/qr-masivo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},95669:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},87034:(e,s,a)=>{Promise.resolve().then(a.bind(a,88585))},44059:(e,s,a)=>{Promise.resolve().then(a.bind(a,2320))},2320:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var r=a(10326),i=a(17577),t=a(88585);function n(){let[e,s]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)({incluirTodos:!0,incluirSoloNoPresentes:!1,incluirSoloPendientesQR:!1,empresaFiltro:"",formatoImpresion:"stickers",tamanoQR:"mediano",incluyeNombre:!0,incluyeEmpresa:!0,incluyeCargo:!1,copiasPorasistente:1,columnas:3,filas:8,enviarImpresora:!1,nombreImpresora:""}),[m,p]=(0,i.useState)([]),[u,x]=(0,i.useState)([]),h=async()=>{if(0===u.length){t.Am.error("No hay asistentes para generar QR");return}l(!0);try{let e=await fetch("/api/qr/masivo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asistentes:u,opciones:c})});if(e.ok){let s=await e.blob();if(c.enviarImpresora&&c.nombreImpresora){let e=new FormData;if(e.append("pdf",s),e.append("impresora",c.nombreImpresora),(await fetch("/api/imprimir",{method:"POST",body:e})).ok)t.Am.success(`C\xf3digos QR enviados a impresora: ${c.nombreImpresora}`);else throw Error("Error enviando a impresora")}else{let e=URL.createObjectURL(s),a=document.createElement("a");a.href=e,a.download=`codigos-qr-masivo-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e),t.Am.success(`PDF con ${u.length} c\xf3digos QR generado`)}await fetch("/api/qr/marcar-generados",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asistentesIds:u.map(e=>e.id)})})}else throw Error("Error generando PDF")}catch(e){t.Am.error("Error en la generaci\xf3n masiva de QR")}finally{l(!1)}},g=Array.from(new Set(e.map(e=>e.empresa).filter(e=>e&&""!==e.trim()))).sort();return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{children:"Cargando asistentes..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCF1 Generaci\xf3n Masiva de QR"}),r.jsx("p",{className:"text-gray-600",children:"Genera e imprime c\xf3digos QR para todos los asistentes"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:h,disabled:o||0===u.length,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition",children:o?"\uD83D\uDD04 Generando...":"\uD83D\uDDA8️ Generar e Imprimir"}),r.jsx("a",{href:"/",className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition",children:"\uD83C\uDFE0 Volver"})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDD0D Filtros de Asistentes"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"filtroTipo",checked:c.incluirTodos,onChange:()=>d(e=>({...e,incluirTodos:!0,incluirSoloNoPresentes:!1,incluirSoloPendientesQR:!1})),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDC65 Todos los asistentes"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"filtroTipo",checked:c.incluirSoloNoPresentes,onChange:()=>d(e=>({...e,incluirTodos:!1,incluirSoloNoPresentes:!0,incluirSoloPendientesQR:!1})),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"⏳ Solo no presentes"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"filtroTipo",checked:c.incluirSoloPendientesQR,onChange:()=>d(e=>({...e,incluirTodos:!1,incluirSoloNoPresentes:!1,incluirSoloPendientesQR:!0})),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDCF1 Sin QR generado"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrar por Empresa"}),(0,r.jsxs)("select",{value:c.empresaFiltro,onChange:e=>d(s=>({...s,empresaFiltro:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Todas las empresas"}),g.map(e=>r.jsx("option",{value:e,children:e},e))]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCD0 Formato de Impresi\xf3n"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Object.entries({stickers:{nombre:"Stickers Circulares",tamaño:"5cm x 5cm",descripcion:"Ideales para adherir a gafetes"},tarjetas:{nombre:"Tarjetas Rectangulares",tamaño:"8.5cm x 5.5cm",descripcion:"Formato tarjeta de visita"},badges:{nombre:"Badges Corporativos",tamaño:"10cm x 7cm",descripcion:"Con informaci\xf3n completa"},custom:{nombre:"Personalizado",tamaño:"Variable",descripcion:"Configuraci\xf3n manual"}}).map(([e,s])=>(0,r.jsxs)("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition ${c.formatoImpresion===e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d(s=>({...s,formatoImpresion:e})),children:[r.jsx("h3",{className:"font-medium text-gray-900",children:s.nombre}),r.jsx("p",{className:"text-sm text-gray-600",children:s.tamaño}),r.jsx("p",{className:"text-xs text-gray-500",children:s.descripcion})]},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tama\xf1o del QR"}),(0,r.jsxs)("select",{value:c.tamanoQR,onChange:e=>d(s=>({...s,tamanoQR:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"pequeno",children:"Peque\xf1o (2cm)"}),r.jsx("option",{value:"mediano",children:"Mediano (3cm)"}),r.jsx("option",{value:"grande",children:"Grande (4cm)"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Columnas por p\xe1gina"}),r.jsx("input",{type:"number",min:"1",max:"10",value:c.columnas,onChange:e=>d(s=>({...s,columnas:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filas por p\xe1gina"}),r.jsx("input",{type:"number",min:"1",max:"20",value:c.filas,onChange:e=>d(s=>({...s,filas:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCC4 Informaci\xf3n a Incluir"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:c.incluyeNombre,onChange:e=>d(s=>({...s,incluyeNombre:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDC64 Nombre del asistente"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:c.incluyeEmpresa,onChange:e=>d(s=>({...s,incluyeEmpresa:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm font-medium",children:"\uD83C\uDFE2 Empresa"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:c.incluyeCargo,onChange:e=>d(s=>({...s,incluyeCargo:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDCBC Cargo"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Copias por asistente"}),r.jsx("input",{type:"number",min:"1",max:"10",value:c.copiasPorasistente,onChange:e=>d(s=>({...s,copiasPorasistente:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"\xdatil para backup o m\xfaltiples ubicaciones"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDDA8️ Configuraci\xf3n de Impresora"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:c.enviarImpresora,onChange:e=>d(s=>({...s,enviarImpresora:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm font-medium",children:"Enviar autom\xe1ticamente a impresora"})]}),c.enviarImpresora&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seleccionar Impresora"}),(0,r.jsxs)("select",{value:c.nombreImpresora,onChange:e=>d(s=>({...s,nombreImpresora:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Seleccionar impresora..."}),m.map(e=>r.jsx("option",{value:e,children:e},e))]}),0===m.length&&r.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"⚠️ No se detectaron impresoras. El PDF se descargar\xe1 para impresi\xf3n manual."})]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCCA Resumen"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:u.length}),r.jsx("div",{className:"text-sm text-blue-800",children:"Asistentes seleccionados"})]})}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.length*c.copiasPorasistente}),r.jsx("div",{className:"text-sm text-green-800",children:"Total c\xf3digos QR a generar"})]})}),r.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl font-bold text-purple-600",children:Math.ceil(u.length*c.copiasPorasistente/(c.columnas*c.filas))}),r.jsx("div",{className:"text-sm text-purple-800",children:"P\xe1ginas estimadas"})]})}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Vista previa (primeros 5):"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[u.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"text-gray-700",children:["• ",e.nombre,e.empresa&&` (${e.empresa})`]},e.id)),u.length>5&&(0,r.jsxs)("div",{className:"text-gray-500 italic",children:["... y ",u.length-5," m\xe1s"]})]})]}),0===u.length&&(0,r.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDD0D"}),r.jsx("p",{children:"No hay asistentes que cumplan los filtros seleccionados"})]})]})]})})]})})]})}},32029:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l,metadata:()=>o});var r=a(19510),i=a(25384),t=a.n(i);a(5023);var n=a(96557);a(97001);let o={title:"Registro de Eventos",description:"Plataforma de registro de eventos en tiempo real",manifest:"/manifest.json",themeColor:"#1e40af",viewport:"width=device-width, initial-scale=1, maximum-scale=1"};function l({children:e}){return(0,r.jsxs)("html",{lang:"es",children:[(0,r.jsxs)("head",{children:[r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("link",{rel:"apple-touch-icon",href:"/icon-192x192.png"}),r.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),r.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),r.jsx("meta",{name:"apple-mobile-web-app-title",content:"Registro Eventos"})]}),(0,r.jsxs)("body",{className:t().className,children:[e,r.jsx(n.Ix,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})]})}},38372:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\Argenis\OneDrive - Universidad Nacional de Colombia\Escritorio\Proyecto Registros\src\app\qr-masivo\page.tsx#default`)},5023:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[948,700],()=>a(16172));module.exports=r})();